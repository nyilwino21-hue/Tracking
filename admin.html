<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SF Shipping - Admin Panel</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="admin-page">
    <div class="container">
        <header>
            <div class="logo-container">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/Logo_of_SF_Express.svg/1280px-Logo_of_SF_Express.svg.png" 
                     alt="SF Shipping Logo" class="sf-logo" onclick="window.location.href='index.html'">
                <h1>SF Shipping Admin</h1>
            </div>
            <p class="tagline">Management Portal - Real-time Shipment Tracking</p>
        </header>

        <div class="admin-container">
            <div class="admin-header">
                <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
                <button id="logoutBtn" class="btn btn-danger">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>

            <div class="admin-tabs">
                <button class="tab-btn active" id="addShippingTab">
                    <i class="fas fa-plus-circle"></i> Add New Shipping
                </button>
                <button class="tab-btn" id="manageShippingTab">
                    <i class="fas fa-list-alt"></i> Manage Shipments
                </button>
            </div>

            <div class="tab-content active" id="addShippingContent">
                <form id="shippingForm" class="shipping-form">
                    <h3><i class="fas fa-box"></i> Create New Shipment</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="senderName"><i class="fas fa-user"></i> Sender Name *</label>
                            <input type="text" id="senderName" required placeholder="Enter sender's full name">
                        </div>
                    </div>

                    <h4><i class="fas fa-user-check"></i> Receiver Information</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="receiverName">Full Name *</label>
                            <input type="text" id="receiverName" required placeholder="Enter receiver's full name">
                        </div>
                        <div class="form-group">
                            <label for="receiverPhone">Phone Number *</label>
                            <input type="tel" id="receiverPhone" required placeholder="Enter receiver's phone number">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="receiverAddress">Full Address *</label>
                            <textarea id="receiverAddress" required rows="3" placeholder="Enter complete delivery address including postal code"></textarea>
                        </div>
                    </div>

                    <h4><i class="fas fa-route"></i> Shipping Route</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="origin">Shipping From *</label>
                            <select id="origin" required>
                                <option value="">Select origin country</option>
                                <option value="Malaysia">Malaysia</option>
                                <option value="Singapore">Singapore</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="destination">Shipping To *</label>
                            <select id="destination" required>
                                <option value="">Select destination country</option>
                                <option value="Australia">Australia</option>
                                <option value="Canada">Canada</option>
                                <option value="USA">United States</option>
                                <option value="New Zealand">New Zealand</option>
                                <option value="Philippines">Philippines</option>
                                <option value="Vietnam">Vietnam</option>
                                <option value="Thailand">Thailand</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Create Shipment
                        </button>
                        <button type="reset" class="btn btn-secondary">
                            <i class="fas fa-redo"></i> Clear Form
                        </button>
                    </div>
                    
                    <div class="hint" style="margin-top: 20px;">
                        <i class="fas fa-info-circle"></i> After submission, a tracking number and confirmation code will be generated. Provide these to the customer.
                    </div>
                </form>
            </div>

            <div class="tab-content" id="manageShippingContent">
                <h3><i class="fas fa-boxes"></i> All Shipments</h3>
                <p style="color: #666; margin-bottom: 20px;">
                    <i class="fas fa-sync-alt"></i> Updates automatically every 30 seconds. 
                    <i class="fas fa-edit"></i> Click "Update" to change shipment status. 
                    <i class="fas fa-qrcode text-success"></i> Click "QR Code" to generate tracking QR. 
                    <i class="fas fa-trash text-danger"></i> Click "Delete" to remove shipment.
                </p>
                
                <div class="table-responsive">
                    <table class="shipping-table">
                        <thead>
                            <tr>
                                <th>Tracking Details</th>
                                <th>Sender</th>
                                <th>Receiver</th>
                                <th>Phone</th>
                                <th>Origin</th>
                                <th>Destination</th>
                                <th>Status</th>
                                <th>Created Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="shippingTableBody">
                            <!-- Shipments will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div id="qrCodeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-qrcode"></i> QR Code Generator</h2>
                <span class="close" onclick="closeQRModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="qr-info">
                    <div class="info-item">
                        <span class="label">Tracking Number:</span>
                        <span class="value" id="qrTrackingNumber"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">Confirmation Code:</span>
                        <span class="value" id="qrConfirmationCode"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">Receiver:</span>
                        <span class="value" id="qrReceiverName"></span>
                    </div>
                </div>
                
                <div class="qr-container">
                    <div id="qrcode" style="margin: 20px auto; display: flex; justify-content: center;"></div>
                    <div class="qr-text">Scan this QR code to track shipment</div>
                </div>
                
                <div class="qr-actions">
                    <button class="btn btn-primary" onclick="downloadQRCode()">
                        <i class="fas fa-download"></i> Download QR Code
                    </button>
                    <button class="btn btn-secondary" onclick="closeQRModal()">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
                
                <div class="qr-note">
                    <p><i class="fas fa-info-circle"></i> This QR code contains tracking information. Customers can scan it to track their shipment directly.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>